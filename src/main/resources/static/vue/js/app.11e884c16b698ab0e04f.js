webpackJsonp([1],{"13iF":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("j1ja");var s=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]},a=n("VU/8")({name:"App"},o,!1,null,null,null).exports,r=n("/ocq"),i=n("mtWM"),c=n.n(i),u=c.a.create({baseURL:"/",timeout:4e4,headers:{"Content-Type":"application/json",Authorization:{toString:function(){return null==sessionStorage.getItem("token")?null:"undefined"!=sessionStorage.getItem("token")?"Bearer "+sessionStorage.getItem("token"):void 0}}}}),l=n("ZZvs"),d=n.n(l),v={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n\theader\n")])},staticRenderFns:[]},m={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n\tfooter\n")])},staticRenderFns:[]},p={name:"Main",components:{appHeader:n("VU/8")({name:"Header",data:function(){return{}},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{}},v,!1,null,null,null).exports,appFooter:n("VU/8")(null,m,!1,null,null,null).exports,Loading:d.a},data:function(){return{token:window.sessionStorage.getItem("token"),msg:"",saveCheck:!1,isLoading:!1,userInfo:{userId:"userId",userName:"userName",password:"password"}}},userInfo:function(){},created:function(){},mounted:function(){this.getCurrentUser()},methods:{getCurrentUser:function(){var e=this;console.log(this.token),u.defaults.headers.common.Authorization="Bearer ".concat(this.token),u.get("/user/detail").then(function(t){(console.log(t.data),"200"!=t.data.ResultCode)?(alert(t.data.resultMsg),e.isLoading=!1):(e.isLoading=!1,e.userInfo=t.data.UserVO,console.log(e.userInfo))}).catch(function(e){console.log(e)})}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("app-header"),e._v(" "),n("div",[n("h2",{staticClass:"logo",staticStyle:{"font-size":"32px","font-weight":"bold"}},[e._v("Vue Sample")]),e._v(" "),n("p",[e._v("User Id: "+e._s(e.userInfo.userId))]),e._v(" "),n("p",[e._v("User Name: "+e._s(e.userInfo.userName))]),e._v(" "),n("p",[e._v("User Id: "+e._s(e.userInfo.password))]),e._v(" "),n("div",{staticClass:"copy"},[e._v("\n            COPYRIGHT© 2017 SSANGYONG&COMMUNICATIONS. ALL RIGHTS RESERVED.\n        ")]),e._v(" "),n("loading",{attrs:{active:e.isLoading,"can-cancel":!0,color:"#ff0000","is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}})],1),e._v(" "),n("app-footer")],1)},staticRenderFns:[]},f=n("VU/8")(p,g,!1,null,null,null).exports,h={name:"Login",components:{Loading:d.a},data:function(){return{username:"",password:"",msg:"",saveCheck:!1,isLoading:!1}},created:function(){""!=window.sessionStorage.getItem("savecheck")?(this.username=window.sessionStorage.getItem("savecheck"),this.saveCheck=!0):(this.username="",this.saveCheck=!1)},mounted:function(){},methods:{loginProcess:function(){var e=this;this.isLoading=!0,this.saveCheck?window.sessionStorage.setItem("savecheck",this.username):window.sessionStorage.setItem("savecheck","");var t=JSON.stringify({userId:this.username,password:this.password});u.post("/auth/login",t).then(function(t){if(void 0==t.data.token)alert("아이디 및 비밀번호가 틀립니다."),e.isLoading=!1;else{var n=e;setTimeout(function(){n.isLoading=!1,"200"==t.data.code?(window.sessionStorage.setItem("token",t.data.token),u.defaults.headers.common.Authorization="Bearer ".concat(t.data.token),n.$router.push("/")):alert(t.data.message)},1e3)}}).catch(function(e){console.log(e)})}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("h2",{staticClass:"logo",staticStyle:{"font-size":"32px","font-weight":"bold"}},[e._v("Vue Sample")]),e._v(" "),n("form",{attrs:{name:"loginForm",id:"loginForm"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"txt_input",attrs:{type:"text",placeholder:"아이디",maxlength:"16",value:""},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginProcess()},input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"txt_input",attrs:{type:"password",placeholder:"비밀번호"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginProcess()},input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),n("input",{staticClass:"btn btn_login",attrs:{type:"button",value:"로그인"},on:{click:function(t){return e.loginProcess()}}}),e._v(" "),n("label",{staticClass:"check_login",attrs:{for:"idSaveCheck"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.saveCheck,expression:"saveCheck"}],attrs:{type:"checkbox",id:"idSaveCheck"},domProps:{checked:Array.isArray(e.saveCheck)?e._i(e.saveCheck,null)>-1:e.saveCheck},on:{change:function(t){var n=e.saveCheck,s=t.target,o=!!s.checked;if(Array.isArray(n)){var a=e._i(n,null);s.checked?a<0&&(e.saveCheck=n.concat([null])):a>-1&&(e.saveCheck=n.slice(0,a).concat(n.slice(a+1)))}else e.saveCheck=o}}}),e._v("사원번호저장\n        ")])]),e._v(" "),n("div",{staticClass:"btnbox"}),e._v(" "),n("div",{staticClass:"copy"},[e._v("\n        COPYRIGHT© 2017 SSANGYONG&COMMUNICATIONS. ALL RIGHTS RESERVED.\n    ")]),e._v(" "),n("loading",{attrs:{active:e.isLoading,"can-cancel":!0,color:"#ff0000","is-full-page":!0},on:{"update:active":function(t){e.isLoading=t}}})],1)},staticRenderFns:[]};var _=n("VU/8")(h,k,!1,function(e){n("13iF")},null,null).exports;s.a.use(r.a);var C=new r.a({routes:[{path:"/",name:"Main",component:f,beforeEnter:function(e,t,n){if(sessionStorage.getItem("token"))return n();n({path:"/login",query:{redirect:e.fullPath}})}},{path:"/login",name:"Login",component:_}],scrollBehavior:function(e,t,n){return n||{x:0,y:0}}}),I=n("NYxO");s.a.use(I.a);var w=new I.a.Store({state:{token:null,empno:"",empnm:"",expire:"",isLoggedIn:!!sessionStorage.getItem("token")},getters:{},mutations:{LOGIN:function(e,t){var n=t.token;e.token=n,e.isLoggedIn=!0},LOGOUT:function(e){e.token=null,e.isLoggedIn=!1,delete sessionStorage.token}},actions:{LOGIN:function(e,t){var n=e.commit,s=t.username,o=t.password;return c.a.post("/auth/login",{username:s,password:o}).then(function(e){var t=e.data;n("LOGIN",t)})},LOGOUT:function(e){(0,e.commit)("LOGOUT")}}});n("9MqX"),n("7qRx"),s.a.config.productionTip=!1,new s.a({router:C,store:w,render:function(e){return e(a)}}).$mount("#app")}},["NHnr"]);
//# sourceMappingURL=app.11e884c16b698ab0e04f.js.map